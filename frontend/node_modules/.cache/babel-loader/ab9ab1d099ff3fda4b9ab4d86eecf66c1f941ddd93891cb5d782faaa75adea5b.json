{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ngxho\\\\Downloads\\\\photo-app-\\\\photo-app-\\\\frontend\\\\src\\\\components\\\\UserList\\\\index.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { Divider, List, ListItemButton, ListItemText, Typography, Badge } from \"@mui/material\";\nimport { Link } from \"react-router-dom\";\nimport fetchModel from \"../../lib/fetchModelData\";\nimport \"./styles.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction UserList() {\n  _s();\n  const [users, setUsers] = useState([]);\n  const [photoCounts, setPhotoCounts] = useState({});\n  const [commentCounts, setCommentCounts] = useState({});\n  useEffect(() => {\n    const fetchUsers = async () => {\n      try {\n        const userData = await fetchModel(\"http://localhost:8081/api/user/list\");\n        setUsers(userData);\n      } catch (error) {\n        console.error(\"Error fetching data:\", error.message);\n      }\n    };\n    fetchUsers();\n  }, []);\n  const fetchPhotoCount = async userId => {\n    try {\n      const photoData = await fetchModel(`http://localhost:8081/api/photo/photosOfUser/${userId}`);\n      const photoCount = photoData.length;\n      setPhotoCounts(prevCounts => ({\n        ...prevCounts,\n        [userId]: photoCount\n      }));\n    } catch (error) {\n      console.error(\"Error fetching photo count:\", error.message);\n    }\n  };\n  const fetchCommentCount = async userId => {\n    try {\n      const commentData = await fetchModel(`http://localhost:8081/api/photo/photosOfUser/${userId}`);\n      let totalComments = 0;\n      commentData.forEach(photo => {\n        totalComments += photo.comments.length;\n      });\n      setCommentCounts(prevCounts => ({\n        ...prevCounts,\n        [userId]: totalComments\n      }));\n    } catch (error) {\n      console.error(\"Error fetching comment count:\", error.message);\n    }\n  };\n  useEffect(() => {\n    users.forEach(user => {\n      fetchPhotoCount(user._id);\n      fetchCommentCount(user._id);\n    });\n  }, [users]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"user-list\",\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h4\",\n      fontWeight: 800,\n      sx: {\n        borderBottom: \"5px solid black\",\n        paddingLeft: 0.5\n      },\n      color: \"DarkSlateGray\",\n      children: \"Users\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(List, {\n      component: \"nav\",\n      children: users.map(user => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(ListItemButton, {\n          component: Link,\n          to: `/users/${user._id}`,\n          children: /*#__PURE__*/_jsxDEV(ListItemText, {\n            primary: /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              fontWeight: 600,\n              color: \"DimGray\",\n              children: `${user.first_name} ${user.last_name}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 19\n            }, this),\n            secondary: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(Badge, {\n                style: {\n                  marginRight: 40,\n                  fontWeight: 700,\n                  color: \"green\"\n                },\n                children: [\"Photos : \", photoCounts[user._id] || 0]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Badge, {\n                style: {\n                  fontWeight: 700,\n                  color: \"red\"\n                },\n                children: [\"Comments : \", commentCounts[user._id] || 0]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 13\n        }, this)]\n      }, user._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n}\n_s(UserList, \"GqZzUmAQWtnV46ljBYqjnH/SAl4=\");\n_c = UserList;\nexport default UserList;\nvar _c;\n$RefreshReg$(_c, \"UserList\");","map":{"version":3,"names":["React","useEffect","useState","Divider","List","ListItemButton","ListItemText","Typography","Badge","Link","fetchModel","jsxDEV","_jsxDEV","UserList","_s","users","setUsers","photoCounts","setPhotoCounts","commentCounts","setCommentCounts","fetchUsers","userData","error","console","message","fetchPhotoCount","userId","photoData","photoCount","length","prevCounts","fetchCommentCount","commentData","totalComments","forEach","photo","comments","user","_id","className","children","variant","fontWeight","sx","borderBottom","paddingLeft","color","fileName","_jsxFileName","lineNumber","columnNumber","component","map","to","primary","first_name","last_name","secondary","style","marginRight","_c","$RefreshReg$"],"sources":["C:/Users/ngxho/Downloads/photo-app-/photo-app-/frontend/src/components/UserList/index.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport {\n  Divider,\n  List,\n  ListItemButton,\n  ListItemText,\n  Typography,\n  Badge,\n} from \"@mui/material\";\nimport { Link } from \"react-router-dom\";\nimport fetchModel from \"../../lib/fetchModelData\";\nimport \"./styles.css\";\n\nfunction UserList() {\n  const [users, setUsers] = useState([]);\n  const [photoCounts, setPhotoCounts] = useState({});\n  const [commentCounts, setCommentCounts] = useState({});\n\n  useEffect(() => {\n    const fetchUsers = async () => {\n      try {\n        const userData = await fetchModel(\n          \"http://localhost:8081/api/user/list\"\n        );\n        setUsers(userData);\n      } catch (error) {\n        console.error(\"Error fetching data:\", error.message);\n      }\n    };\n\n    fetchUsers();\n  }, []);\n\n  const fetchPhotoCount = async (userId) => {\n    try {\n      const photoData = await fetchModel(\n        `http://localhost:8081/api/photo/photosOfUser/${userId}`\n      );\n      const photoCount = photoData.length;\n      setPhotoCounts((prevCounts) => ({\n        ...prevCounts,\n        [userId]: photoCount,\n      }));\n    } catch (error) {\n      console.error(\"Error fetching photo count:\", error.message);\n    }\n  };\n\n  const fetchCommentCount = async (userId) => {\n    try {\n      const commentData = await fetchModel(\n        `http://localhost:8081/api/photo/photosOfUser/${userId}`\n      );\n      let totalComments = 0;\n      commentData.forEach((photo) => {\n        totalComments += photo.comments.length;\n      });\n      setCommentCounts((prevCounts) => ({\n        ...prevCounts,\n        [userId]: totalComments,\n      }));\n    } catch (error) {\n      console.error(\"Error fetching comment count:\", error.message);\n    }\n  };\n\n  useEffect(() => {\n    users.forEach((user) => {\n      fetchPhotoCount(user._id);\n      fetchCommentCount(user._id);\n    });\n  }, [users]);\n\n  return (\n    <div className=\"user-list\">\n      <Typography\n        variant=\"h4\"\n        fontWeight={800}\n        sx={{ borderBottom: \"5px solid black\", paddingLeft: 0.5 }}\n        color={\"DarkSlateGray\"}\n      >\n        Users\n      </Typography>\n      <List component=\"nav\">\n        {users.map((user) => (\n          <div key={user._id}>\n            <ListItemButton component={Link} to={`/users/${user._id}`}>\n              <ListItemText\n                primary={\n                  <Typography variant=\"h6\" fontWeight={600} color={\"DimGray\"}>\n                    {`${user.first_name} ${user.last_name}`}\n                  </Typography>\n                }\n                secondary={\n                  <div>\n                    <Badge\n                      style={{\n                        marginRight: 40,\n                        fontWeight: 700,\n                        color: \"green\",\n                      }}\n                    >\n                      Photos : {photoCounts[user._id] || 0}\n                    </Badge>\n                    <Badge style={{ fontWeight: 700, color: \"red\" }}>\n                      Comments : {commentCounts[user._id] || 0}\n                    </Badge>\n                  </div>\n                }\n              />\n            </ListItemButton>\n            <Divider />\n          </div>\n        ))}\n      </List>\n    </div>\n  );\n}\n\nexport default UserList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}